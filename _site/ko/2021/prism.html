<!DOCTYPE html>

<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Project Prism | Orb_H</title>
<meta name="generator" content="Jekyll v3.9.1" />
<meta property="og:title" content="Project Prism" />
<meta property="og:locale" content="ko" />
<meta name="description" content="계기" />
<meta property="og:description" content="계기" />
<link rel="canonical" href="https://orb-h.github.io/projects/ko/2021/prism" />
<meta property="og:url" content="https://orb-h.github.io/projects/ko/2021/prism" />
<meta property="og:site_name" content="Orb_H" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-09-13T23:50:52+09:00" />
<script type="application/ld+json">
{"headline":"Project Prism","dateModified":"2021-09-13T22:51:08+09:00","datePublished":"2021-09-13T23:50:52+09:00","url":"https://orb-h.github.io/projects/ko/2021/prism","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://orb-h.github.io/projects/siteicon.png"}},"@type":"Article","description":"계기","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

		<link type="application/atom+xml" rel="alternate" href="https://orb-h.github.io/projects/feed.xml" title="Orb_H" />

		
		
		

		<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/moonspam/NanumSquare@1.0/nanumsquare.css">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,400italic,700,700italic|Open+Sans:400,400italic,600,600italic,700,700italic|Inconsolata:400,700">

		<script type="text/x-mathjax-config">
			MathJax.Hub.Config({
			  extensions: ["tex2jax.js"],
			  jax: ["input/TeX", "output/HTML-CSS"],
			  skipStartupTypeset: true,
			  tex2jax: {
				inlineMath: [ ['$','$'], ["\\(","\\)"] ],
				displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
				processEscapes: true
			  },
			  "HTML-CSS": { fonts: ["TeX"] }
			});
		</script>
		<script type="text/javascript"
		  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS_HTML">
	   </script>

		<link rel="stylesheet" href="/projects/css/main.css">
		<link rel="stylesheet" href="/projects/css/ko.css">
		<link rel="icon" href="/projects/images/favicon-16.png" sizes="16x16">
		<link rel="icon" href="/projects/images/favicon-32.png" sizes="32x32">
		<link rel="icon" href="/projects/images/favicon-48.png" sizes="48x48">
		<link rel="icon" href="/projects/images/favicon-57.png" sizes="57x57">
		<link rel="icon" href="/projects/images/favicon-64.png" sizes="64x64">
		<link rel="icon" href="/projects/images/favicon-72.png" sizes="72x72">
		<link rel="icon" href="/projects/images/favicon-96.png" sizes="96x96">
		<link rel="icon" href="/projects/images/favicon-120.png" sizes="120x120">
		<link rel="icon" href="/projects/images/favicon-128.png" sizes="128x128">
		<link rel="icon" href="/projects/images/favicon-144.png" sizes="144x144">
		<link rel="icon" href="/projects/images/favicon-152.png" sizes="152x152">
		<link rel="icon" href="/projects/images/favicon-195.png" sizes="195x195">
		<link rel="icon" href="/projects/images/favicon-228.png" sizes="228x228">
		<link rel="icon" href="/projects/images/favicon-256.png" sizes="256x256">
		<link rel="icon" href="/projects/images/favicon-480.png" sizes="480x480">

		
	</head>

	<body>
		<header>
			<h1>
				<a href="/projects/ko"><img src="/projects/images/emblem.png" width="40px" height="40px" alt="Orb_H logo"></a>
				Orb_H
				<button type="button" class="open-nav" id="open-nav"></button>
			</h1>

			<form action="/projects/ko/search/" method="get">
				<input type="text" name="q" id="search-input" placeholder="검색..." autofocus>
				<input type="submit" value="Search" style="display: none;">
			</form>

			<nav class="full-navigation">
				<ul>
					<li class="nav-item top-level">
						<a href="/projects/ko/">메인 페이지</a>
					</li>
				</ul>

				<ul>
					
					
					
					
					
						<li class="nav-item top-level">
							
							
							<a href="/projects/ko/2016/titration">2016</a>
							<ul>
								
									<li class="nav-item"><a href="/projects/ko/2016/titration">산-염기 적정 시뮬레이션</a></li>
								
							</ul>
						</li>
					
						<li class="nav-item top-level">
							
							
							<a href="/projects/ko/2019/plcomp">2019</a>
							<ul>
								
									<li class="nav-item"><a href="/projects/ko/2019/plcomp">프로그래밍언어 최종 과제</a></li>
								
							</ul>
						</li>
					
						<li class="nav-item top-level">
							
							
							<a href="/projects/ko/2021/prism">2021</a>
							<ul>
								
									<li class="nav-item"><a href="/projects/ko/2021/prism">Project Prism</a></li>
								
							</ul>
						</li>
					
						<li class="nav-item top-level">
							
                        		
				</ul>

				<ul>
					<li class="nav-item top-level">
						<a>외부 링크</a>
						<ul>
							<li class="nav-item">
								<a href="https://orb-h.github.io/ko/">루트 페이지</a>
							</li>
							<li class="nav-item">
								<a href="https://orb-h.github.io/resume/ko/">이력서</a>
							</li>
							<li class="nav-item">
								<a href="https://orb-h.github.io/blog/ko/">블로그</a>
							</li>
							<li class="nav-item">
								<a href="https://github.com/CloudCannon/edition-jekyll-template"><b>테마 리포지토리</b></a>
							</li>
						</ul>
					</li>
				</ul>
			</nav>
		</header>

		<section class="main">
			<div class="page-header">
				<h2>2021</h2>
				<h3>Project Prism</h3>
				<div align="right">
					
						
						한국어
						 / 
						<a href="/projects/en/2021/prism">English</a>
						
					
				</div>
			</div>
			<article class="content">
				<link href="/projects/css/item.css" rel="stylesheet"></link>
<script src="/projects/scripts/item_init.js" async></script>
<p align="right">


    진행 기간: 2021.06~07<br />


마지막 수정: 2021-09-13 22:51:08 +0900<br />
</p>
<p>
    
        <code>Godot</code>
    
        <code>Rhythm Game</code>
    
</p>


<blockquote>중심의 정다각형과 그 정다각형으로 다가가는 노트...</blockquote>


<ul id="toc">
    <li style="font-size:20px;font-weight:bold;">목차</li>
</ul>

<h3 id="계기">계기</h3>

<p>군대에서 신병 휴가를 즐긴 후 2주 간 분리를 하게 되었는데<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup>, 당시 24시간 아무것도 안하면서도 핸드폰은 17:30~21:00에만 사용할 수 있어서 매우 심심했다. 같이 생활하던 병사들은 너무 할 게 없어서 공부를 하거나 독서를 하는 등 일반적인 군생활을 하면서 절대 안 할 것 같은 일을 하곤 했다. 나는 딱히 책도 없고 해서 다른 학교 컴퓨터공학과인 동기의 전공책(운영체제)을 빌려서 조금씩 읽었는데, 그마저도 몇 페이지 읽지 못하고 때려쳤다. 차라리 그 동기와 게임 아이디어나 하나 만들어보는 것이 나을 것 같아서 각자 아이디어를 생각하고 토론하는 방식으로 시간을 때웠다. 나는 최근 가장 많이 플레이하던 장르인 리듬게임에 대해 생각해봤는데, 아무리 생각해봐도 단순 낙하형이나 중심에서 바깥으로 멀어지는 방식은 너무 진부했다. 이미 다 있는 것들이었다<sup id="fnref:2" role="doc-noteref"><a href="#fn:2" class="footnote" rel="footnote">2</a></sup>. 그래서 중심에 특정 모양이 있고 노트가 그 중심 도형 위로 모여드는 방식은 어떨까해서 이 컨셉으로 몇 가지 경우를 구상해보기로 했다.</p>

<h3 id="구상">구상</h3>

<h4 id="기본-컨셉">기본 컨셉</h4>

<h5 id="아이디어-1">아이디어 #1</h5>

<ul>
  <li>중심이 정n각형이고 n은 게임이 진행되는 동안 가변</li>
  <li>노트의 길이가 중심의 정n각형의 변의 길이과 같음</li>
</ul>

<p><img src="/projects/images/2021/prism/idea1.svg" alt="Idea #1" /></p>

<h5 id="아이디어-2">아이디어 #2</h5>

<ul>
  <li>중심이 정n각형이고 n은 게임이 진행되는 동안 가변</li>
  <li>노트가 정n각형을 확대한 후 한 변만 따온 모양</li>
</ul>

<p><img src="/projects/images/2021/prism/idea2.svg" alt="Idea #2" /></p>

<h5 id="아이디어-3">아이디어 #3</h5>

<ul>
  <li>중심이 원이고 노트의 모양이 원호</li>
</ul>

<p><img src="/projects/images/2021/prism/idea3.svg" alt="Idea #3" /></p>

<h5 id="선택">선택</h5>

<p>우선 아이디어 #3은 아무리 봐도 Lanota를 뒤집은 것으로 밖에 보이지 않아 일찍이 배제되었다. 아이디어 #1은 같이 아이디어를 고민하던 동기가 노트는 화면 전체에서 떨어지는데 터치는 화면 전체를 사용하지 않아 비효율적인 것 같다고 하여 아이디어 #2로 결정했다. <del>슈퍼 헥사곤하고 좀 많이 닮은 것 같다</del></p>

<p>아이디어 #2를 선택한 후 중심 도형을 삼각형으로 하는 플레이 화면을 간단히 그려봤는데, 그리고 나니 마치 프리즘을 옆면에서 바라보는 느낌이 났다. 그래서 이 프로젝트의 이름이 <strong>Project Prism</strong>이 되었고, 전반적인 컨셉을 이쪽으로 잡기로 했다.</p>

<h4 id="점수-체계">점수 체계</h4>

<p>점수 체계에도 세부적으로 결정해야 하는 것이 있기에 세부 항목으로 분리하였다. 개발 당시 정리하던 파일은 <a href="https://docs.google.com/document/d/1mdxpHWwCPiecoei5UahBwa3mdLEu_sXsH7HrL9vdp4o/edit?usp=sharing">여기</a>에서 볼 수 있다.</p>

<h5 id="만점">만점</h5>

<p>구상 초기에는 플레이하던 게임에서 사용하는 만점 시스템에 대해 알아본 후 비교해본 후 결정하기로 했다. 우선 1,000,000, 100.00%, 노트 점수 고정 방식이 있음을 생각했고 개발할 때 다시 정하기로 했다.</p>

<p>개발하면서 정리한 내용은 아래와 같다.</p>

<ul>
  <li><strong>1,000,000</strong>
    <ul>
      <li>사용하는 게임: Cytus, VOEZ, Lanota, Dynamix, OverRapid 등 다수</li>
    </ul>
  </li>
  <li>100.00%
    <ul>
      <li>사용하는 게임: Deemo, ADOFAI, Cytus(TP) 등</li>
      <li>Deemo는 데이터 파일을 분석해본 결과 실제로는 1,000,000 만점의 정수형으로 저장하는 것으로 판별</li>
      <li>ADOFAI는 100.00%+(매우 정확)×0.01%, 즉, 가능한 최대 점수가 100.00%이 아니고 100.00+(노트 수)×0.01%이다.</li>
    </ul>
  </li>
  <li>10,000,000
    <ul>
      <li>사용하는 게임: Arcaea</li>
      <li>Arcaea는 더욱 정확한 판정에 대해 노트 당 1점씩 더 부여한다. 다만 만점을 굳이 10,000,000으로 설정한 것은 기타 판정(Good, Miss)보다 가중치를 훨씬 작게 설정하여 Good과 Miss를 더 많이 냈지만 이 판정으로 인하여 순위가 역전되는 상황을 만들지 않게 하기 위함으로 추측한다.<sup id="fnref:3" role="doc-noteref"><a href="#fn:3" class="footnote" rel="footnote">3</a></sup></li>
    </ul>
  </li>
  <li>노트 수에 비례한 점수
    <ul>
      <li>일반적으로 이 경우 콤보에 대한 점수는 할당되어있지 않다.</li>
      <li>이 경우 채보마다 만점이 달라서 플레이어의 순위를 매기는 경우 단순평균이 아닌 다른 방법을 사용해야 한다.</li>
    </ul>
  </li>
</ul>

<h5 id="콤보">콤보</h5>

<p>초기 격리 중에 아이디어를 구상할 때에는 $n\log{n}$ 방식으로 정했다. 수식으로 표현하자면 노트 n개의 채보에서 최대 콤보 m을 만들면 $\frac{m\log{m}}{n\log{n}}$에 비례한 콤보 점수를 받아가는 것이다.</p>

<p>개발 중에는 뭔가 특이한 콤보 공식($n\log{n}$도 특이하긴 하지만 더 특이한 것이 필요했다)을 넣고 싶었다. Geogebra를 사용해서 이것저것 실험해보았는데, 그 때 찍어놓은 스크린샷은 아래와 같다. <del>왜 이런거 하냐고 물어보신다면 할 말이 없습니다</del></p>

<p><img src="/projects/images/2021/prism/formula.png" alt="여러 테스트용 함수" /></p>

<p>그 중 나의 의도에 맞는 콤보 공식을 오랜 시도 끝에 얻었다. 그 식은 아래와 같다.</p>

\[\frac{m}{n}-0.1\frac{\sin{((\frac{m}{n})^{1.5}\pi)}}{\sin{({0.5}^{1.5}\pi)}}\]

<p>이 식을 x, x<sup>2</sup>와 비교한 그림과 풀콤보 대비 얻을 수 있는 점수는 아래와 같다.</p>

<p><img src="/projects/images/2021/prism/formula2.png" alt="x,x^2과 그래프 비교" /></p>

<details>
<summary>콤보 대비 점수 비율</summary>
<table><thead><tr><th>콤보</th><th>점수</th></tr></thead>
<tbody>
<tr><td><strong>0%</strong></td><td><strong>0%</strong></td></tr>
<tr><td>5%</td><td>4.6081%</td></tr>
<tr><td>10%</td><td>8.8931%</td></tr>
<tr><td>15%</td><td>12.9749%</td></tr>
<tr><td>20%</td><td>16.9051%</td></tr>
<tr><td><strong>25%</strong></td><td><strong>20.7291%</strong></td></tr>
<tr><td>30%</td><td>24.4913%</td></tr>
<tr><td>35%</td><td>28.2413%</td></tr>
<tr><td>40%</td><td>32.0348%</td></tr>
<tr><td>45%</td><td>35.9326%</td></tr>
<tr><td><strong>50%</strong></td><td><strong>40%</strong></td></tr>
<tr><td>55%</td><td>44.3035%</td></tr>
<tr><td>60%</td><td>48.9079%</td></tr>
<tr><td>65%</td><td>53.8714%</td></tr>
<tr><td>70%</td><td>59.2412%</td></tr>
<tr><td><strong>75%</strong></td><td><strong>65.0483%</strong></td></tr>
<tr><td>80%</td><td>71.3019%</td></tr>
<tr><td>85%</td><td>77.9854%</td></tr>
<tr><td>90%</td><td>85.0528%</td></tr>
<tr><td>95%</td><td>92.4269%</td></tr>
<tr><td><strong>100%</strong></td><td><strong>100%</strong></td></tr>
</tbody>
</table>
</details>

<p>대략적으로 0% 근처에서는 풀콤보 대비 콤보 비율과 점수 비율이 비슷했고, 중후반 구간에서는 10%정도 차이가 남을 알 수 있다.<sup id="fnref:4" role="doc-noteref"><a href="#fn:4" class="footnote" rel="footnote">4</a></sup> 위 그림에서 회색 선이 콤보 비율과 점수 비율이 10% 차이나는 지점을 찾기 위해 그은 보조선이다.</p>

<h4 id="인게임-애니메이션">인게임 애니메이션</h4>

<h5 id="초기격리-중">초기(격리 중)</h5>

<p>우선 총 6가지의 애니메이션을 구현하는 것으로 했다. 그 목록은 아래와 같다.</p>

<table>
  <thead>
    <tr>
      <th>명칭</th>
      <th>변수</th>
      <th>설명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Translation</td>
      <td>pos[Vector2]</td>
      <td>카메라 이동 혹은 중심 도형 이동</td>
    </tr>
    <tr>
      <td>Rotation</td>
      <td>deg[float]</td>
      <td>중심 도형 회전</td>
    </tr>
    <tr>
      <td>Zoom</td>
      <td>magnifier[float]</td>
      <td>카메라 수직 이동 혹은 중심 도형 확대/축소</td>
    </tr>
    <tr>
      <td>Add_Side</td>
      <td>dst_side[int]</td>
      <td>중심 도형 변 개수 증가</td>
    </tr>
    <tr>
      <td>Remove_Side</td>
      <td>dst_side[int]</td>
      <td>중심 도형 변 개수 감소</td>
    </tr>
    <tr>
      <td>Center_Rotation</td>
      <td>deg[float]</td>
      <td>카메라 회전</td>
    </tr>
  </tbody>
</table>

<h4 id="노트">노트</h4>

<h5 id="터치-노트">터치 노트</h5>

<object data="https://orb-h.github.io/animate-svg-test/simple_note.svg"></object>

<h4 id="채보-파일">채보 파일</h4>

<h4 id="기타">기타</h4>

<hr />

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1" role="doc-endnote">
      <p>당시 코로나바이러스감염증-19에 대한 방침은 휴가 복귀일을 지정하여 휴가를 나간 병사들이 일괄적으로 복귀할 수 있도록 하는 것이었고, 휴가 복귀 시 일반 병사와 분리된 공간에서 휴가 복귀한 병사들과 같이 2주간 생활을 하는 것이었다. <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:2" role="doc-endnote">
      <p>단순 낙하형은 생각해봐도 아주 많았다. 단순 낙하형하면 Deemo나 탭소닉, OverRapid 등 가장 흔한 타입이었다. 여기에 머리를 조금 써서 두 축방향으로 낙하하는 <a href="https://play.google.com/store/apps/details?id=com.teamrhythmicals.costheta">costheta</a>(서로 알지는 못하지만 학교 선배가 팀 총괄로 제작한 리듬게임이다), 판정선 기준 양쪽에서 떨어지는 STATIC이나 판정선이 세 방향으로 놓여있는 Dynamix, 가로선이 자유롭게 움직이는 VOEZ, 판정선이 낙하하는 Cytus와 DJMax Technika 등 바리에이션도 웬만한 것은 다 있었다. 거기에 중심에서 바깥으로 멀어지는 방식은 아케이드 게임은 Maimai, 모바일 게임은 Lanota, Stellights, Hachi Hachi 등 이미 다 있었다. <a href="#fnref:2" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:3" role="doc-endnote">
      <p>극단적인 예시를 들어보자면, 모든 노트를 Perfect로 처리했으나 모두 일반 Perfect인 경우의 점수가 하나를 제외한 모든 노트를 Super Perfect(공식 명칭 아님)으로 처리하고 나머지 하나는 Good으로 처리한 경우의 점수보다 높아야 한다. 즉, Good 판정으로 인해 잃은 점수가 매우 정확 판정으로만 얻을 수 있는 점수보다 커야 한다는 의미이다. <a href="#fnref:3" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:4" role="doc-endnote">
      <p>애초에 여러 함수를 테스트해보면서 초반에는 $y=x$와 비슷하고 후반은 $y=x^{1.5}$와 비슷한 함수를 찾고 있었다. 거기에 50% 콤보 구간에서 점수가 정확히 40%가 나오는 것이 좋겠다 생각했다. 이 조건을 꽤 잘 만족하는 위 함수에 정확히 풀콤보의 반을 대입하면 함수값이 0.4가 나온다. <a href="#fnref:4" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>


			</article>
		</section>

		<script>
			document.getElementById("open-nav").addEventListener("click", function () {
				document.body.classList.toggle("nav-open");
			});
		</script>
	</body>
</html>
